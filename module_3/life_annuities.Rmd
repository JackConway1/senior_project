---
title: "life_annuities"
author: "Marcus Milazzo"
date: "9/28/2017"
header-includes:
   - \usepackage{actuarialangle}
output: pdf_document
---
```{r, echo=FALSE, messages = FALSE, warning=FALSE, results='hide'}
library(lifecontingencies)
```


#Introduction

In the previous module, we looked at life insurance and introduced the concept of actuarial present value. Life insurance payments were often contingent upon death, and now we turn to a form of payments that are often contingent upon survival: **life annuities**. Recall that an annuity is a series of payments that occur at equal intervals over time. Life annuities play a major role in life insurance operations, as well as pension systems. A life annuity of premiums is usually used to purchase life insurance rather than a lump sum, and a retirement plan can be thought of as a system for purchasing deferred life annuities.

All of the previous annuity concepts from finance hold true, but now we have the added condition of survival. Payments may occur continuously or at equal intervals, and payments can occur at the beginning or end of periods. In our introduction of the topic here, we will focus primarily on discrete life annuities with payments made at the beginning of the year (annuities-due), because they have a more prominent role in actuarial applications.

##3.1 

We’ll begin with a simple example where a person pays for life insurance with a life annuity of premiums. The person pays 1 at the beginning of each year for the next 5 years. If this was an annuity from BUS 342, we would write the sum and discount each payment to time zero. However, with a life annuity the person can only make these payments as long as they are living, so each payment is contingent upon their probability of survival. 

Suppose for the next 5 years the probability of payment has been determined from a life table to be .95 for each year. With an interest rate of .08, the actuarial present value is written
\[ \text{APV} = (1)(.95) + (1)(.95)v^1 + (1)(.95)v^2 + (1)(.95)v^3 + (1)(.95)v^4 = 4.02615 \]

The above method for calculating APV is known as the **current-payment technique**. This intuitive method is simply discounting the payment being made, and multiplying by the probability that the payment is made in the first place. We write this generally as
\[ a_{x} = v^{k} \ _{k}p_{x} . \]

\vspace{.25cm}

With a complete life table, we can do a more extended example. Suppose a person that is 40 wants to purchase life insurance with level payments of $1,000 at the beginning of each year for the next 20 years. An actuary with a life table corresponding to (40) wants to calculate the APV of this annuity. Using the current-payment technique, we can write this out by hand as

\[ \text{APV} = (1000) + (1000)(_{1}p_{40})v^1 + (1000)(_{2}p_{40})v^2 + (1000)(_{3}p_{40})v^3 + \textellipsis +(1000)(_{19}p_{40})v^{19} = 10289.06  \]

We can confirm our answer by using the *presentValue* function from the *lifecontingencies* package.

```{r}
data("soa08")
prob <- rep(NA, 20)
prob[1] = 1                                       # probability of first payment is 1
for(i in 1:19){				           # get the probabilities from the lifetable object
  prob[i+1] <- pxt(soa08, x = 40, t = i)            # [i+1] for indexing
}
payments <- rep(1000, 20)
interest <- .08
years <- 0:19				 	# first payment is at year “0” because it's an annuity-due
presentValue(cashFlows = payments, timeIds = years, interestRates = interest, 
                      probabilities = prob)
```



##3.2 Mathematics

The current-payment technique is convenient, but how do we know it’s legitimate? For the derivation, we’ll consider a **whole life annuity-due**, which is an annuity that pays at the beginning of each year for every year that (*x*) survives. The present-value random variable, *Y*, is given by $Y = a_{K+1}$, where K is the curtate-future-lifetime of (*x*). The probability associated with the value $a_{K+1}$ is Pr($K=k$) = $_{k}p_{x} q_{x+k}$. We use the definition of expected value to write
\[
\text{APV} = \text{E}[Y] = \text{E}[a_{K+1}] = \text{sum}.
\]

Using summation by parts and by taking advantage of some relations, it can be shown that the above converts to
\[ a_{x} = v^{k} \ _{k}p_{x} \]
which is the convenient current payment form.

Annuities can also occur with continuous payments. For example, the **whole life annuity** provides for payments until death, so that the present value is $Y = \bar{a}_\angl{t}$ for all $T \ge 0$. Then to find the actuarial present value we assume a constant payment of 1, and a constant force of interest to set up the integral
\[ \bar{a}_x = \text{E}[Y] =  \int_{0}^{\infty} \bar{a}_\angl{t}  \ _{t}p_{x} \ \mu (x+t) \ dt\]

and use integration by parts to yield
\[ \bar{a}_x = \int_{0}^{\infty} v^t \ _{t}p_{x} \ dt = \int_{0}^{\infty}\ _{t}\text{E}_{x} \ dt . \]

In general, the current payment technique for continuous annuities can be thought of as
\[ APV = \int_{0}^{\infty} v^{t}\ \text{Pr[payment made at time}\ t\text{]} \times [\text{Payment rate at time}\ t] \ dt \]

Similar to what we saw in the life insurance module, there are many different types of annuities that we can create by changing when the payments occur, and their amounts. They can all be written in the intuitive current payment form following derivations very similar to the one above.

##Problems


